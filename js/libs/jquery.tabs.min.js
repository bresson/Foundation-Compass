/**
 * Accessible Tabs - jQuery plugin for accessible, unobtrusive tabs 
 * code: http://github.com/ginader/Accessible-Tabs
 * please report issues at: http://github.com/ginader/Accessible-Tabs/issues
 *
 * Copyright (c) 2007 Dirk Ginader (ginader.de)
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 * Version: 1.9.3
 */
(function(b){function l(b,f){p&&window.console&&window.console.log&&(f?window.console.log(f+": ",b):window.console.log(b))}var p=!0;b.fn.extend({getUniqueId:function(b,f,g){return b+f+(void 0===g?"":"-"+g)},accessibleTabs:function(e){var f={37:-1,38:-1,39:1,40:1},g={top:"prepend",bottom:"append"};this.options=b.extend({wrapperClass:"content",currentClass:"current",tabhead:"h4",tabheadClass:"tabhead",tabbody:".tabbody",fx:"show",fxspeed:"normal",currentInfoText:"current tab: ",currentInfoPosition:"prepend", currentInfoClass:"current-info",tabsListClass:"tabs-list",syncheights:!1,syncHeightMethodName:"syncHeight",cssClassAvailable:!1,saveState:!1,autoAnchor:!1,pagination:!1,position:"top",wrapInnerNavLinks:"",firstNavItemClass:"first",lastNavItemClass:"last"},e);var h=0;void 0!==b("body").data("accessibleTabsCount")&&(h=b("body").data("accessibleTabsCount"));b("body").data("accessibleTabsCount",this.size()+h);var a=this;return this.each(function(e){var c=b(this),j="",n=0,k=[];b(c).wrapInner('<div class="'+ a.options.wrapperClass+'"></div>');b(c).find(a.options.tabhead).each(function(c){var d="";if(elId=b(this).attr("id")){if(0===elId.indexOf("accessibletabscontent"))return;d=' id="'+elId+'"'}var m=a.getUniqueId("accessibletabscontent",h+e,c),c=a.getUniqueId("accessibletabsnavigation",h+e,c);k.push(m);if(!0===a.options.cssClassAvailable){var f="";b(this).attr("class")&&(f=b(this).attr("class"),f=' class="'+f+'"');j+='<li id="'+c+'"><a'+d+""+f+' href="#'+m+'">'+b(this).html()+"</a></li>"}else j+='<li id="'+ c+'"><a'+d+' href="#'+m+'">'+b(this).html()+"</a></li>";b(this).attr({id:m,"class":a.options.tabheadClass,tabindex:"-1"});n++});a.options.syncheights&&b.fn[a.options.syncHeightMethodName]&&(b(c).find(a.options.tabbody)[a.options.syncHeightMethodName](),b(window).resize(function(){b(c).find(a.options.tabbody)[a.options.syncHeightMethodName]()}));var d="."+a.options.tabsListClass;if(!b(c).find(d).length)b(c)[g[a.options.position]]('<ul class="clearfix '+a.options.tabsListClass+" tabamount"+n+'"></ul>'); b(c).find(d).append(j);d=b(c).find(a.options.tabbody);0<d.length&&(b(d).hide(),b(d[0]).show());b(c).find("ul."+a.options.tabsListClass+">li:first").addClass(a.options.currentClass).addClass(a.options.firstNavItemClass).find("a")[a.options.currentInfoPosition]('<span class="'+a.options.currentInfoClass+'">'+a.options.currentInfoText+"</span>").parents("ul."+a.options.tabsListClass).children("li:last").addClass(a.options.lastNavItemClass);a.options.wrapInnerNavLinks&&b(c).find("ul."+a.options.tabsListClass+ ">li>a").wrapInner(a.options.wrapInnerNavLinks);b(c).find("ul."+a.options.tabsListClass+">li>a").each(function(d){b(this).click(function(e){e.preventDefault();c.trigger("showTab.accessibleTabs",[b(e.target)]);a.options.saveState&&b.cookie&&b.cookie("accessibletab_"+c.attr("id")+"_active",d);b(c).find("ul."+a.options.tabsListClass+">li."+a.options.currentClass).removeClass(a.options.currentClass).find("span."+a.options.currentInfoClass).remove();b(this).blur();b(c).find(a.options.tabbody+":visible").hide(); b(c).find(a.options.tabbody).eq(d)[a.options.fx](a.options.fxspeed);b(this)[a.options.currentInfoPosition]('<span class="'+a.options.currentInfoClass+'">'+a.options.currentInfoText+"</span>").parent().addClass(a.options.currentClass);b(b(this).attr("href")).focus().keyup(function(c){f[c.keyCode]&&(a.showAccessibleTab(d+f[c.keyCode]),b(this).unbind("keyup"))})});b(this).focus(function(){b(document).keyup(function(b){f[b.keyCode]&&a.showAccessibleTab(d+f[b.keyCode])})});b(this).blur(function(){b(document).unbind("keyup")})}); a.options.saveState&&b.cookie&&(d=b.cookie("accessibletab_"+c.attr("id")+"_active"),l(b.cookie("accessibletab_"+c.attr("id")+"_active")),null!==d&&a.showAccessibleTab(d,c.attr("id")));a.options.autoAnchor&&window.location.hash&&(d=b("."+a.options.tabsListClass).find(window.location.hash),d.size()&&d.click());if(a.options.pagination){var i='<ul class="pagination">',i=i+' <li class="previous"><a href="#{previousAnchor}"><span>{previousHeadline}</span></a></li>',i=i+' <li class="next"><a href="#{nextAnchor}"><span>{nextHeadline}</span></a></li>', i=i+"</ul>",d=b(c).find(".tabbody"),o=d.size();d.each(function(a){b(this).append(i);var d=a+1;d>=o&&(d=0);var e=a-1;0>e&&(e=o-1);var a=b(this).find(".pagination"),f=a.find(".previous");f.find("span").text(b("#"+k[e]).text());f.find("a").attr("href","#"+k[e]).click(function(a){a.preventDefault();b(c).find(".tabs-list a").eq(e).click()});a=a.find(".next");a.find("span").text(b("#"+k[d]).text());a.find("a").attr("href","#"+k[d]).click(function(a){a.preventDefault();b(c).find(".tabs-list a").eq(d).click()})})}})}, showAccessibleTab:function(e,f){l("showAccessibleTab");var g=this;if(f){var h=b("#"+f),a=h.find("ul."+g.options.tabsListClass+">li>a");h.trigger("showTab.accessibleTabs",[a.eq(e)]);a.eq(e).click()}else return this.each(function(){var a=b(this);a.trigger("showTab.accessibleTabs");var c=a.find("ul."+g.options.tabsListClass+">li>a");a.trigger("showTab.accessibleTabs",[c.eq(e)]);c.eq(e).click()})},showAccessibleTabSelector:function(e){l("showAccessibleTabSelector");(e=b(e))&&("a"==e.get(0).nodeName.toLowerCase()? e.click():l("the selector of a showAccessibleTabSelector() call needs to point to a tabs headline!"))}})})(jQuery);
